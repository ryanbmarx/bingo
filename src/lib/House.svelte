<script lang="ts">
	import { getRandomInt } from '../utils/random';

	const windows = $state([
		{
			on: false,
			d: 'M508.523,1221.85l2.206,36.917l-50.179,2.997l-2.206,-36.916l50.179,-2.998Zm-106.148,43.39l-2.205,-36.917l50.179,-2.998l2.205,36.917l-50.179,2.998Zm108.831,1.522l2.206,36.917l-50.179,2.997l-2.206,-36.916l50.179,-2.998Zm2.683,44.912l2.206,36.917l-50.179,2.998l-2.205,-36.917l50.178,-2.998Zm-106.147,43.39l-2.206,-36.917l50.179,-2.997l2.205,36.916l-50.178,2.998Zm-2.684,-44.912l-2.205,-36.917l50.179,-2.997l2.205,36.916l-50.179,2.998Z'
		},
		{
			on: false,
			d: 'M786.319,1276.86l-12.424,34.833l-47.347,-16.886l12.424,-34.834l47.347,16.887Zm-114.663,-1.631l12.424,-34.833l47.347,16.887l-12.423,34.833l-47.348,-16.887Zm99.548,44.009l-12.423,34.833l-47.348,-16.887l12.424,-34.833l47.347,16.887Zm-15.114,42.377l-12.424,34.834l-47.347,-16.887l12.424,-34.834l47.347,16.887Zm-114.662,-1.631l12.423,-34.833l47.347,16.887l-12.423,34.833l-47.347,-16.887Zm15.114,-42.377l12.424,-34.834l47.347,16.887l-12.424,34.833l-47.347,-16.886Z'
		},
		{
			on: false,
			d: 'M293.293,877.313l7.394,45.178l-61.408,10.05l-7.394,-45.178l61.408,-10.05Zm-125.207,66.879l-7.394,-45.177l61.408,-10.05l7.394,45.177l-61.408,10.05Zm134.202,-11.916l7.394,45.177l-61.408,10.051l-7.394,-45.178l61.408,-10.05Zm8.995,54.962l7.394,45.178l-61.408,10.05l-7.393,-45.178l61.407,-10.05Zm-125.206,66.88l-7.394,-45.178l61.408,-10.05l7.394,45.178l-61.408,10.05Zm-8.996,-54.963l-7.393,-45.178l61.407,-10.05l7.394,45.178l-61.408,10.05Z'
		},
		{
			on: false,
			d: 'M1047.41,1010.85l-15.379,43.118l-58.608,-20.903l15.378,-43.118l58.609,20.903Zm-141.935,-2.019l15.379,-43.119l58.609,20.904l-15.379,43.118l-58.609,-20.903Zm123.226,54.476l-15.379,43.119l-58.609,-20.904l15.379,-43.118l58.609,20.903Zm-18.71,52.457l-15.378,43.119l-58.609,-20.904l15.379,-43.118l58.608,20.903Zm-141.935,-2.019l15.379,-43.118l58.609,20.903l-15.379,43.119l-58.609,-20.904Zm18.71,-52.457l15.378,-43.118l58.609,20.903l-15.378,43.118l-58.609,-20.903Z'
		},
		{
			on: false,
			d: 'M718.301,558.638l-3.548,35.724l-48.557,-4.824l3.549,-35.723l48.556,4.823Zm-108.399,25.307l3.549,-35.723l48.557,4.824l-3.549,35.723l-48.557,-4.824Zm104.082,18.154l-3.549,35.723l-48.557,-4.824l3.549,-35.723l48.557,4.824Zm-4.318,43.46l-3.549,35.723l-48.556,-4.824l3.549,-35.723l48.556,4.824Zm-108.399,25.307l3.549,-35.723l48.557,4.823l-3.549,35.724l-48.557,-4.824Zm4.317,-43.461l3.549,-35.723l48.557,4.824l-3.549,35.723l-48.557,-4.824Z'
		},
		{
			on: false,
			d: 'M490.448,548.222l2.057,35.84l-48.716,2.796l-2.057,-35.84l48.716,-2.796Zm-103.137,41.877l-2.057,-35.84l48.716,-2.796l2.057,35.84l-48.716,2.796Zm105.639,1.725l2.057,35.841l-48.715,2.795l-2.057,-35.84l48.715,-2.796Zm2.503,43.603l2.057,35.84l-48.716,2.796l-2.057,-35.84l48.716,-2.796Zm-103.137,41.877l-2.057,-35.84l48.716,-2.796l2.057,35.84l-48.716,2.796Zm-2.502,-43.602l-2.057,-35.84l48.715,-2.796l2.057,35.84l-48.715,2.796Z'
		},
		{
			on: true,
			d: 'M929.154,616.685l-13.192,33.388l-45.382,-17.931l13.192,-33.387l45.382,17.93Zm-111.187,-5.331l13.192,-33.387l45.381,17.931l-13.191,33.387l-45.382,-17.931Zm95.138,45.95l-13.192,33.388l-45.382,-17.931l13.192,-33.388l45.382,17.931Zm-16.049,40.619l-13.191,33.387l-45.382,-17.931l13.191,-33.387l45.382,17.931Zm-111.186,-5.331l13.191,-33.388l45.382,17.931l-13.192,33.387l-45.381,-17.93Zm16.048,-40.619l13.192,-33.387l45.382,17.93l-13.192,33.388l-45.382,-17.931Z'
		},
		{
			on: true,
			d: 'M753.092,814.083l-8.609,86.658l-117.79,-11.701l8.609,-86.658l117.79,11.701Zm-262.957,61.39l8.609,-86.658l117.79,11.702l-8.609,86.658l-117.79,-11.702Zm252.484,44.037l-8.609,86.658l-117.79,-11.702l8.609,-86.658l117.79,11.702Zm-10.474,105.427l-8.609,86.658l-117.79,-11.702l8.609,-86.658l117.79,11.702Zm-262.958,61.389l8.61,-86.657l117.789,11.701l-8.609,86.658l-117.79,-11.702Zm10.474,-105.426l8.609,-86.658l117.79,11.702l-8.609,86.658l-117.79,-11.702Z'
		}
	]);

	function initWindow(node: SVGElement, index: number) {
		const waitTime = getRandomInt(30, 90) * 1000;

		setTimeout(() => {
			windows[index].on = !windows[index].on;
			initWindow(node, index);
		}, waitTime);
	}
</script>

<svg
	width="100%"
	height="100%"
	viewBox="0 0 1147 1532"
	version="1.1"
	xmlns="http://www.w3.org/2000/svg"
	xmlns:xlink="http://www.w3.org/1999/xlink"
	xml:space="preserve"
	style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"
>
	<rect id="house" x="0" y="0" width="1146.95" height="1531.31" style="fill:none;" />
	<clipPath id="house-clip">
		<rect x="0" y="0" width="1146.95" height="1531.31" />
	</clipPath>
	<g clip-path="url(#house-clip)">
		<path
			d="M335.752,802.604l16.072,-3.015l-37.574,-240.505l-125.569,-1.823l120.141,-105.623l129.032,-289.447l115.495,264.688l328.055,-426.608l0,315.599l90.596,192.233l94.188,147.812l-88.133,24.063l-102.548,222.22l174.381,-54.198l97.788,209.156l-71.395,-21.513l-88.144,241.633l-102.885,-37.531l-102.311,291.565l-424.833,0.271l-69.3,-392.018l-127.727,23.957l-3.564,-19.003l-2.197,0.426l-52.314,-269.779l-102.282,18.455l160.452,-218.785l174.576,127.77Z"
		/>
		{#each windows as { d, on }, index (d)}
			<path {d} class:on data-on={on} class="window" use:initWindow={index} />
		{/each}
	</g>
</svg>

<style lang="scss">
	svg {
		fill-rule: evenodd;
		clip-rule: evenodd;
		stroke-linejoin: round;
		stroke-miterlimit: 2;
		position: fixed;
		bottom: 0;
		left: 0;
		width: unset;
		height: 25rem;
		fill: #220929;
	}

	.window {
		fill: #fcca4c;
		opacity: 0.1;
		filter: grayscale(100%);
		transition:
			opacity 75ms ease-in-out,
			filter 75ms ease-in-out;

		&.on {
			opacity: 1;
			filter: grayscale(0);
		}
	}
</style>
